#!/usr/bin/env python

from pathlib import Path
import yaml

print("Loading courts...")

with open("src/ds_caselaw_utils/data/court_names.yaml", "r") as stream:
    groups = yaml.safe_load(stream)

print("Building list of courts...")

with Path("courts.md").open("w") as f:
    f.write("# Courts in configuration file\n")
    f.write("\n")
    f.write(
        "<!-- This file is automatically generated from scripts/build_courts_list. You shouldn't edit it manually. -->\n",
    )
    f.write("\n")

    for group in groups:
        if group["display_name"]:
            f.write(f"\n## {group['display_name']} ({group['name']})\n")
        else:
            f.write(f"\n## {group['name']}\n")

        f.write(
            "\n| Name | Code | Param | Start | End |\n",
        )
        f.write("| --- | --- | --- | --- | --- |\n")

        for court in group["courts"]:
            f.write("| ")
            f.write(court["grouped_name"] if "grouped_name" in court else court["name"])

            f.write(" | ")
            f.write(court["code"])

            f.write(" | ")
            f.write(court["param"] if "param" in court else "–")

            f.write(" | ")
            f.write(str(court["start_year"]) if "start_year" in court else "–")

            f.write(" | ")
            f.write(str(court["end_year"]) if "end_year" in court else "–")

            f.write(" |\n")
